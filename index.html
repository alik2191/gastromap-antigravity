<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="https://base44.com/logo_v2.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#F2F2F7" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="manifest" href="/manifest.json" />
  <title>GastroMap</title>

  <!-- Synchronous theme initialization to prevent flash on pull-to-refresh -->
  <script>
    (function () {
      // Get saved theme from localStorage
      const savedTheme = localStorage.getItem('theme') || 'system';

      // Resolve actual theme
      let actualTheme = savedTheme;
      if (savedTheme === 'system') {
        actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }

      // Apply theme immediately
      const root = document.documentElement;
      const metaThemeColor = document.querySelector('meta[name="theme-color"]');

      if (actualTheme === 'dark') {
        root.classList.add('dark');
        root.style.colorScheme = 'dark';
        if (metaThemeColor) metaThemeColor.setAttribute('content', '#000000');
      } else {
        root.classList.remove('dark');
        root.style.colorScheme = 'light';
        if (metaThemeColor) metaThemeColor.setAttribute('content', '#F2F2F7');
      }
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>

</html>